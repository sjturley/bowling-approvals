/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package bowling.approvals;

import java.util.Iterator;
import java.util.LinkedList;
import java.util.stream.Collectors;

public class BowlingGame {
    LinkedList<Frame> frames = new LinkedList<>();
    Frame currentFrame;
    Iterator<Frame> frameIterator;

    public BowlingGame() {
        for (int i = 0; i < 9; i++) {
            frames.add(new Frame(frames.peekLast()));
        }
        frames.add(new TenthFrame(frames.peekLast()));

        frameIterator = frames.iterator();
        currentFrame = frameIterator.next();
    }

    public void roll(int i) {
         if (currentFrame.isDone() && frameIterator.hasNext()) {
              currentFrame = frameIterator.next();
         }
         currentFrame.addRoll(i);
    }

    public String toJson() {
        String frameLine = "";
        for (Frame frame : frames) {
            frameLine += "        " + frame.getString() + ",\n";
        }
        return "{\n" +
                "    frames: [\n" +
                frameLine +
                "    ]\n" +
                "}";
    }

}
