/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package bowling.approvals;

import java.util.ArrayList;
import java.util.List;

public class BowlingGame {
    ArrayList<Integer> rolls = new ArrayList<>();
    public static final String LINE_HEADER = " ____________________________________________________________\n" +
            "|__1__|__2__|__3__|__4__|__5__|__6__|__7__|__8__|__9__|__10__|\n";
    public static final String LINE_FOOTER = "|_____|_____|_____|_____|_____|_____|_____|_____|_____|______|";

    public String score() {
        String frameRollRecord = "";
        String frameScore = "";
        for(int i = 0; i < 9; i++) {
            String firstFrameLine = getFrameLine(i);
            String firstFrameScore = getFrameScore(i);
            frameRollRecord += firstFrameLine;
            frameScore += "|  " + firstFrameScore + " ";
        }

        frameRollRecord += "|  |_|_|\n";
        frameScore += "|      |\n";
        return LINE_HEADER +
                frameRollRecord +
                frameScore +
                LINE_FOOTER;
    }

    private String getFrameLine(int frameIndex) {
        int rollIndex1 = frameIndex * 2;
        int rollIndex2 = frameIndex * 2 + 1;
        String firstRoll = getRollString(rollIndex1);
        String secondRoll = getSecondFrameRollString(rollIndex2);
        return "|  " + firstRoll + "|" + secondRoll;
    }

    private String getFrameScore(int frameIndex) {
        int rollIndex1 = frameIndex * 2;
        int rollIndex2 = frameIndex * 2 + 1;
        if (rolls.size() > rollIndex2) {
            return String.format("% 2d", rolls.get(rollIndex1) + rolls.get(rollIndex2));
        }
        return "  ";
    }

    private String getRollString(int index) {
        if (rolls.size() <= index) return " ";
        if (rolls.get(index) == 0) return "-";

        return rolls.get(index).toString();
    }

    private String getSecondFrameRollString(int index) {
        if (rolls.size() <= index) return "_";
        if (rolls.get(index) == 0) return "-";

        return rolls.get(index).toString();
    }

    public void roll(int roll) {
        rolls.add(roll);
    }
}
